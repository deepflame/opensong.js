/*! opensong 2014-04-08 */
var opensong;opensong=opensong||{},opensong.helper=opensong.helper||{},opensong.helper.parseLyrics=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(a=a.replace(/\r\n?/g,"\n"),k=a.split("\n"),f=[],g={header:void 0,lines:[]},f.push(g);k.length>0;)if(j=k.shift(),null!=j)switch(j[0]){case"[":g.lines.length>0&&(g={header:void 0,lines:[]},f.push(g)),h=j.match(/\[(.*)\]/)[1],g.header=h;break;case".":for(e=j.substr(1),b=[];e.length>0;)l=/^(\S*\s*)(.*)/.exec(e),b.push(l[1]),e=l[2];for(0===b.length&&b.push(e),c=[],b.forEach(function(a){return l=/(\S*\s?)\s*/.exec(a),c.push(l[1])}),n="",o=[],l=null;(n=k.shift())&&(l=n.match(/^([ 1-9])(.*)/));){m=[],p=l[1],n=l[2];for(i in b)i<b.length-1?(d=b[i].length,l=n.match(new RegExp("(.{0,"+d+"})(.*)")),m.push(l[1]),n=l[2]):m.push(n);o.push(m)}g.lines.push({chords:c,lyrics:o.length>0?o:void 0}),"undefined"!==n&&k.unshift(n);break;case";":g.lines.push({comments:j.substr(1)});break;default:/^[ 0-9]/.test(j)&&g.lines.push({lyrics:[j.substr(1)]})}return f},"object"==typeof module&&(module.exports.parse=opensong.helper.parseLyrics);